<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portfolio project</title>
  <link rel="stylesheet" href="style.css" />


  <style>
    p {
      font-size: 2em;
      font-family: Arial, Helvetica, sans-serif;
      padding-right: 20%;
    }
  </style>


  <!-- Text animation script -->
  <script>
    async function rainbowText(milliseconds, repetitions, targetHTML) {
      // The HTML where the text will be displayed with the parameter 'targetHTML'
      let innerHTML = document.getElementById(targetHTML).innerHTML;

      // Take every chracter inside the target element and sort it into an array, where each item contains a single letter.
      let arrayFromString = innerHTML.split(``);

      // Returns any character found in a keyboard @ radom.
      function randomChar() {
        const randomChars = `\`1234567890-=qwertyuiop[]asdfghjkl;'zxcvbnm,./!@#$%^&*()_+\\QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>?`;
        return randomChars[Math.floor(Math.random() * randomChars.length)];
      }

      // Returs a color selected randomly.
      function getColor() {
        const colors = [
          "red",
          "orange",
          "yellow",
          "green",
          "blue",
          `cyan`,
          `pink`,
          `purple`,
          `gold`,
        ];
        return colors[Math.floor(Math.random() * colors.length)];
      }

      // Encloses argument string with a <span> element that uses inline CSS to color it.
      function colorSpan(string) {
        return `<span style="color:${getColor()}">${string}</span>`;
      }

      function subString(n, end) {
        // Take the array that contains one character per item & convert it to a string. The .join("") method converts arrays to strings. The returned string has no separators.
        let str = arrayFromString.join("");
        // Defines how many characters from the current string will be returned.
        return str.substring(n, end);
      }

      // Uses the innerHTML method to display whatever string argument is given to the correct HTML target.
      function displayText(string) {
        document.getElementById(targetHTML).innerHTML = string;
      }

      // Used to add delays between operations. Otherwise things happen so quickly that it's impossible to appreciate what's going on.
      function sleep(ms) {
        return new Promise((resolve) => setTimeout(resolve, ms));
      }

      // Do this for the lenght of arrayFromString
      for (let index = 0; index != arrayFromString.length; index++) {
        if (index == 0) {
          // Repetitions is the nubmer of times each character changes.
          for (let i = 0; i < repetitions; i++) {
            // Delays need to occur every time the displayText function is used.
            await sleep(milliseconds / 4);
            // The 1st character is always a random character
            displayText(colorSpan(randomChar())); // <- How to check for same character?
          }
          await sleep(milliseconds / 4);
          // The next string to display always starts from the current index (let's say it's 0) to the next one (0 + 1).
          displayText(subString(index, index + 1));
        } else {
          for (let i = 0; i < repetitions; i++) {
            await sleep(milliseconds / 4);
            displayText(subString(0, index) + colorSpan(randomChar()));
          }
          await sleep(milliseconds / 4);
          displayText(subString(0, index + 1));
        }
      }
    }

  </script>
</head>

<body id="body">

  <img src="./profilePic.jpg" style="width: 15%;"><br>
  <p id="target">
    Hello, welcome to my page.<br>
    My name is Juan Cruz.<br>
    I study web development at Joliet Junior College.<br><br>
    You are looking at a JavaScript program that uses async functions, promises to be more specific, to display text in
    an interesting manner.<br><br>
    <a href="https://github.com/jcruz-ui/Portfolio/blob/main/index.html">See the code for this page.</a><br><br>
    Send me an email:<br>
    mtycruz@gmail.com
  </p>
  <script>
    rainbowText(18, 6, `target`);
  </script>
</body>

</html>
